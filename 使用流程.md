# LongHoDian 午餐點餐平台 - 使用流程

## 目錄
1. [系統概述](#系統概述)
2. [召集人使用流程](#召集人使用流程)
3. [匿名用戶點餐流程](#匿名用戶點餐流程)
4. [完整流程圖](#完整流程圖)

---

## 系統概述

LongHoDian 是一個公司內部午餐點餐協作平台，主要特色：

- **召集人（Organizer）**：負責管理店家、品項，建立團購訂單，統整訂單
- **匿名用戶**：透過分享連結或 QRCode 進行點餐，無需登入
- **響應式設計**：支援手機、平板、桌面裝置

---

## 召集人使用流程

### 1. 註冊與登入

#### 1.1 註冊帳號（僅限召集人）

1. 訪問平台首頁
2. 點擊「註冊」按鈕
3. 填寫註冊資訊：
   - 使用者名稱（username）
   - 暱稱（nickname，可選）
   - 密碼（password）
   - 確認密碼
4. 提交註冊表單
5. 系統自動設定角色為「召集人」

> **注意**：只有召集人可以註冊帳號，一般用戶無需註冊，透過分享連結即可點餐。

#### 1.2 登入後台

1. 訪問平台首頁
2. 點擊「登入」按鈕
3. 輸入使用者名稱和密碼
4. 點擊「登入」
5. 成功登入後，會自動跳轉到後台首頁

---

#### 1.3 後台首頁 

左側有功能列表，可以點擊進入各個功能頁面。
功能頁面如下：
- 店家管理
- 品項管理
- 開始點餐
- 訂單管理
- 歷史訂單
- 登出


### 2. 店家管理

#### 2.1 新增店家

1. 在後台首頁，點擊「店家管理」
2. 點擊「新增店家」按鈕
3. 填寫店家資訊：
   - 店家名稱（必填）
   - 聯絡方式（電話、地址等）
   - 備註說明
   - 圖片 URL（可選，可上傳或使用外部連結）
   - 分類標籤（可選，如：中式、日式、西式等）
   - 排序順序（數字越小越靠前）
4. 點擊「儲存」
5. 店家會顯示在店家列表中

#### 2.2 編輯店家

1. 在店家管理頁面，找到要編輯的店家
2. 點擊店家卡片上的「編輯」按鈕
3. 修改店家資訊
4. 點擊「儲存」確認修改

#### 2.3 刪除店家

1. 在店家管理頁面，找到要刪除的店家
2. 點擊「刪除」按鈕
3. 確認刪除操作（系統會提示確認）
4. 店家及其所有品項將被刪除

#### 2.4 啟用/停用店家

1. 在店家管理頁面，找到要操作的店家
2. 點擊「啟用/停用」切換開關
3. 停用的店家不會在點餐頁面顯示

---

### 3. 品項管理

#### 3.1 新增品項

1. 在店家管理頁面，找到要新增品項的店家
2. 點擊店家卡片上的「管理品項」按鈕
3. 在品項管理 Modal 中，點擊「新增品項」
4. 填寫品項資訊：
   - 品項名稱（必填）
   - 價格（必填）
   - 描述（可選）
   - 圖片 URL（可選）
   - 分類（可選，如：主餐、飲料、甜點等）
   - 排序順序
   - 是否推薦（勾選後會顯示推薦標籤）
5. **客製化選項設定**（可選）：
   - 點擊「新增客製化選項」
   - 輸入選項名稱（如：大小、溫度、加料等）
   - 新增選項值（如：大、中、小 或 熱、冰、去冰等）
   - 設定預設值（預設選擇第一個選項）
   - 可選擇使用範本快速套用（如有設定）
6. 點擊「儲存」
7. 品項會顯示在該店家的品項列表中

#### 3.2 編輯品項

1. 在品項管理 Modal 中，找到要編輯的品項
2. 點擊「編輯」按鈕
3. 修改品項資訊或客製化選項
4. 點擊「儲存」確認修改

#### 3.3 刪除品項

1. 在品項管理 Modal 中，找到要刪除的品項
2. 點擊「刪除」按鈕
3. 確認刪除操作

#### 3.4 啟用/停用品項

1. 在品項管理 Modal 中，找到要操作的品項
2. 切換「啟用/停用」開關
3. 停用的品項不會在點餐頁面顯示

#### 3.5 批量匯入品項

1. 在品項管理 Modal 中，點擊「批量匯入」
2. 下載 CSV 範本檔案
3. 依照範本格式填寫品項資料
4. 上傳 CSV 檔案
5. 系統會自動匯入品項

---

### 4. 開始點餐

#### 4.1 建立點餐訂單

1. 在後台首頁，點擊「開始點餐」
2. 點擊「建立點餐訂單」按鈕
3. 填寫訂單資訊：
   - 訂單名稱（必填，如：「2024/01/15 午餐團購」）
   - 截止時間（可選，設定點餐截止時間）
   - 店家（必填，選擇要點餐的店家）
4. 點擊「建立」
5. 系統會自動產生：
   - 分享 Token（唯一識別碼）
   - 分享連結
   - QRCode（SVG 格式）
6. **重要**：訂單建立後預設為「開放」狀態，參與者可以開始點餐

> **說明**：召集人須選店家，選好後訂單開放給他人填寫的時候，他們只能點選召集人選的那家店家來點餐

#### 4.2 取得分享連結與 QRCode

1. 在訂單管理中，找到要分享的點餐訂單
2. 點擊「分享」按鈕
3. 系統會顯示：
   - 分享連結（可直接複製）
   - QRCode 圖片（可下載或分享）
4. 可選擇是否預填參與者姓名：
   - 分享連結可包含 `?name=參與者姓名` 參數
   - QRCode 可包含預填姓名資訊
5. 將連結或 QRCode 分享給參與者，參與者即可開始點餐

#### 4.3 重新產生分享連結

1. 如果分享連結外洩需要更換：
2. 在訂單管理頁面，點擊「重新產生 Token」
3. 確認操作
4. 舊的分享連結將失效，新的連結會自動產生

---

### 5. 查看訂單管理

#### 5.1 查看訂單管理

1. 在訂單管理頁面，列出近期的每筆點餐訂單
2. 顯示訂單使用表格來呈現
3. 表格欄位有 訂單ID、訂單名稱、訂餐店家、訂單狀態、建立日期、截止時間、操作按鈕
4. 操作按鈕欄位顯示兩顆按鈕，詳細資訊，結束訂單(如果訂單狀態還在開放中才顯示)
5. 詳細資訊為按鈕，點擊後出現Modal視窗，顯示訂單總金額，誰點了什麼點了多少錢
   

#### 5.2 訂單統計

1. 在訂單統整頁面，可查看：
   - 總訂單數
   - 總金額
   - 按店家分組的統計
   - 按品項分組的統計
   - 個人分攤金額（如有設定）

#### 5.3 匯出訂單

1. 在訂單統整頁面，點擊「匯出訂單」
2. 選擇匯出格式：
   - CSV 格式（Excel 可開啟）
   - PDF 格式（如需列印）
3. 下載檔案
4. 可分享給其他相關人員

---



### 6. 查看歷史訂單

1. 在後台首頁，點擊「歷史訂單」或「訂單歷史」
2. 系統會顯示所有歷史訂單
3. 可以搜尋：
   - 日期範圍
   - 店家名稱
   - 訂單名稱
4. 點擊訂單可查看詳細訂單資訊

---

## 匿名用戶點餐流程

### 1. 進入點餐頁面

#### 方式一：透過分享連結

1. 召集人分享連結（如：`https://your-domain.com/order/share/abc123`）
2. 點擊連結或在瀏覽器輸入連結
3. 系統會自動載入該訂單的點餐頁面

#### 方式二：掃描 QRCode

1. 使用手機相機或 QRCode 掃描 App
2. 掃描召集人提供的 QRCode
3. 自動開啟點餐頁面

#### 方式三：透過包含姓名的連結

1. 如果召集人分享的連結包含姓名參數（如：`?name=張三`）
2. 系統會自動預填姓名，但仍可修改

---

### 2. 輸入姓名

1. 首次進入點餐頁面時，會彈出姓名輸入對話框
2. 輸入您的姓名或暱稱（必填）
3. 點擊「確認」
4. 如果連結已包含姓名參數，可選擇使用預填姓名或修改

> **注意**：姓名僅用於統計和識別，不會用於其他用途。

---

### 3. 瀏覽品項

#### 3.1 瀏覽品項

1. 進入頁面後，會顯示該店家的所有啟用品項
2. 可以使用以下功能：
   - **分類導航**：點擊頂部分類標籤，快速跳轉到該分類
   - **搜尋**：在店家內搜尋品項名稱
   - **篩選**：按分類、價格範圍篩選
3. 品項會按分類分組顯示
4. 每個品項卡片顯示：
   - 品項圖片（或佔位圖）
   - 品項名稱
   - 價格
   - 描述
   - 推薦標籤（如有）
   - 「加入購物車」按鈕

---

### 4. 選擇品項並加入購物車

#### 4.1 選擇無客製化選項的品項

1. 點擊品項卡片上的「加入購物車」按鈕
2. 品項會直接加入購物車
3. 購物車浮動按鈕會顯示更新後的數量和總金額

#### 4.2 選擇有客製化選項的品項

1. 點擊品項卡片上的「自訂」或「加入購物車」按鈕
2. 會彈出客製化選項 Modal，顯示：
   - 品項圖片和名稱
   - 價格
   - 所有客製化選項（每個選項預設選擇第一個值）
3. 修改客製化選項（如：選擇大小、溫度、加料等）
4. 點擊「加入購物車」
5. 系統會記住您的選擇，並加入購物車

> **提示**：如果有常用組合的範本，可以快速選擇。

---

### 5. 管理購物車

#### 5.1 查看購物車

1. 點擊右下角的購物車浮動按鈕
2. 購物車側邊欄會從右側滑出（或底部彈出，手機版）
3. 顯示所有已選品項：
   - 品項圖片
   - 品項名稱
   - 客製化選項（如有）
   - 單價
   - 數量控制按鈕（+、-）
   - 小計
   - 刪除按鈕

#### 5.2 修改數量

1. 在購物車中，點擊「+」增加數量
2. 點擊「-」減少數量
3. 數量為 0 時會自動移除該品項

#### 5.3 刪除品項

1. 在購物車中，找到要刪除的品項
2. 點擊「刪除」按鈕（垃圾桶圖示）
3. 品項會從購物車中移除

#### 5.4 查看總金額

1. 購物車底部會顯示：
   - 總品項數量
   - 總金額
2. 購物車浮動按鈕也會顯示總金額

---

### 6. 提交訂單

#### 6.1 填寫訂單備註（可選）

1. 在購物車中，找到「訂單備註」欄位
2. 輸入特殊要求或備註（如：不要蔥、微辣等）
3. 備註會顯示在訂單中，供店家參考

#### 6.2 確認並提交

1. 確認購物車中的所有品項和數量
2. 確認總金額
3. 點擊「提交訂單」按鈕
4. 系統會顯示確認對話框
5. 再次點擊「確認提交」
6. 提交成功後會顯示成功提示
7. 購物車會自動清空

#### 6.3 提交失敗處理

如果提交失敗（如：訂單已截止），系統會顯示錯誤訊息，可以：
- 聯繫召集人確認訂單狀態
- 確認網路連線正常
- 重新整理頁面後再試

---

### 7. 修改或取消訂單

#### 7.1 修改訂單（截止時間前）

1. 如果訂單尚未截止，可以修改訂單
2. 在點餐頁面，如果已有訂單，會顯示「修改訂單」按鈕
3. 點擊後可以：
   - 新增品項
   - 修改數量
   - 刪除品項
4. 確認後點擊「更新訂單」

#### 7.2 取消訂單

1. 在訂單確認頁面，點擊「取消訂單」
2. 確認取消操作
3. 訂單會被取消，購物車會清空

> **注意**：一旦訂單截止，將無法修改或取消訂單。

---

## 完整流程圖

### 召集人完整流程

```
[註冊/登入]
    ↓
[登入後台]
    ↓
[管理店家] → [新增/編輯/刪除店家] → [啟用/停用店家]
    ↓
[管理品項] → [新增/編輯/刪除品項] → [設定客製化選項] → [啟用/停用品項]
    ↓
[決定訂單時間] → [建立團購訂單] → [設定訂單名稱與截止時間] → [設定訂單店家]
    ↓
[產生分享連結/QRCode] → [分享給參與者]
    ↓
[參與者可選擇品項進行點餐]
    ↓
[查看訂單統整] → [統計品項] → [匯出訂單]
    ↓
[決定結束時間] → [手動關閉訂單 或 等待自動截止] → [標記訂單完成]
```

### 匿名用戶完整流程

```
[收到召集人分享的連結/QRCode]
    ↓
[開啟點餐頁面]
    ↓
[輸入姓名]
    ↓
[選擇品項] → [設定客製化選項（如有）]
    ↓
[加入購物車]
    ↓
[管理購物車] → [修改數量/刪除品項] → [填寫備註]
    ↓
[提交訂單] → [確認訂單資訊]
    ↓
[訂單提交成功] → [等待召集人統整]
    ↓
[訂單截止後無法修改訂單]
```

---

## 注意事項

### 召集人注意事項

1. **訂單管理**：
   - **召集人完全控制團購訂單的開啟與結束**：
     - 決定何時建立新訂單（開團）
     - 決定何時關閉訂單（結束），可手動關閉或設定自動截止時間
   - 建立訂單後，建議設定截止時間，避免忘記關閉
   - 截止時間到達後，系統會自動關閉點餐功能
   - 如需提前關閉，可手動設定訂單狀態為「關閉」

2. **店家與品項管理**：
   - **參與者可以選擇任何啟用的店家與品項**
   - 召集人透過啟用/停用店家與品項來控制可選範圍
   - 停用店家或品項不會刪除歷史訂單，但會從點餐頁面隱藏
   - 建議在訂單開始前完成所有店家與品項的設定

3. **分享連結安全**：
   - 分享連結包含唯一 Token，請妥善保管
   - 如連結外洩，可使用「重新產生 Token」功能
   - 舊連結會立即失效

4. **訂單統計**：
   - 訂單會即時更新，無需重新整理
   - 建議在訂單截止後再進行最終統計

### 匿名用戶注意事項

1. **點餐時間**：
   - 注意訂單的截止時間（由召集人決定）
   - 截止時間後無法修改或新增訂單
   - 訂單關閉後也無法進行點餐操作

2. **品項選擇**：
   - 只能選擇召集人在建立訂單時指定的那家店家的品項
   - 可以在該店家中選擇多個不同的品項
   - 無法選擇其他店家的品項

3. **購物車**：
   - 購物車資料儲存在瀏覽器中
   - 清除瀏覽器資料可能會清空購物車
   - 建議在截止時間前完成點餐

4. **客製化選項**：
   - 某些品項有客製化選項（如大小、溫度等）
   - 預設會選擇第一個選項，記得確認是否符合需求

5. **訂單備註**：
   - 如需特殊要求，可在訂單備註中填寫
   - 備註會顯示在訂單中，供店家參考

---

## 常見問題

### Q1: 忘記召集人密碼怎麼辦？
A: 目前系統不支援密碼重置功能，請聯繫系統管理員協助處理。

### Q2: 召集人何時可以開團？
A: 召集人可以隨時決定何時建立新的團購訂單，不受時間限制。建立訂單後，訂單預設為「開放」狀態，參與者可以開始點餐。

### Q3: 召集人如何結束團購？
A: 召集人有兩種方式結束團購：
   - **手動關閉**：在訂單管理頁面點擊「關閉訂單」，立即停止接受新訂單
   - **自動截止**：設定截止時間，到達時間後系統自動關閉訂單

### Q4: 可以同時開啟多個訂單嗎？
A: 可以，但建議一次只開啟一個訂單，避免混淆。

### Q5: 參與者可以選擇哪些店家？
A: 參與者只能選擇召集人在建立訂單時指定的那家店家的品項。召集人透過啟用/停用功能來控制該店家中哪些品項可以選擇。

### Q6: 點餐頁面可以選擇其他店家的品項嗎？
A: 不可以。匿名用戶只能看到並選擇召集人在建立訂單時指定的那家店家的品項。如果需要在其他店家點餐，需要等待召集人建立新的訂單場次。

### Q7: 購物車資料會保存多久？
A: 購物車資料儲存在瀏覽器中，直到提交訂單或清除瀏覽器資料為止。

### Q8: 提交訂單後可以修改嗎？
A: 在訂單截止時間前可以修改，截止後無法修改。訂單關閉後也無法修改訂單。

### Q9: QRCode 可以重複使用嗎？
A: 可以，QRCode 在訂單結束前都可以使用，但訂單截止或關閉後會無法點餐。



